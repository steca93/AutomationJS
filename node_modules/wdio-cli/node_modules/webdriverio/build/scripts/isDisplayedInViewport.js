"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = isDisplayedInViewport;

require("source-map-support/register");

/**
 * check if element is visible and within the viewport
 * @param  {HTMLElement} elem  element to check
 * @return {Boolean}           true if element is within viewport
 */
function isDisplayedInViewport(elem) {
  const dde = document.documentElement;
  let isWithinViewport = true;

  while (elem.parentNode && elem.parentNode.getBoundingClientRect) {
    const elemDimension = elem.getBoundingClientRect();
    const elemComputedStyle = window.getComputedStyle(elem);
    const viewportDimension = {
      width: dde.clientWidth,
      height: dde.clientHeight
    };
    isWithinViewport = isWithinViewport && elemComputedStyle.display !== 'none' && elemComputedStyle.visibility === 'visible' && parseFloat(elemComputedStyle.opacity, 10) > 0 && elemDimension.bottom > 0 && elemDimension.right > 0 && elemDimension.top < viewportDimension.height && elemDimension.left < viewportDimension.width;
    elem = elem.parentNode;
  }

  return isWithinViewport;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zY3JpcHRzL2lzRGlzcGxheWVkSW5WaWV3cG9ydC5qcyJdLCJuYW1lcyI6WyJpc0Rpc3BsYXllZEluVmlld3BvcnQiLCJlbGVtIiwiZGRlIiwiZG9jdW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJpc1dpdGhpblZpZXdwb3J0IiwicGFyZW50Tm9kZSIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImVsZW1EaW1lbnNpb24iLCJlbGVtQ29tcHV0ZWRTdHlsZSIsIndpbmRvdyIsImdldENvbXB1dGVkU3R5bGUiLCJ2aWV3cG9ydERpbWVuc2lvbiIsIndpZHRoIiwiY2xpZW50V2lkdGgiLCJoZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJkaXNwbGF5IiwidmlzaWJpbGl0eSIsInBhcnNlRmxvYXQiLCJvcGFjaXR5IiwiYm90dG9tIiwicmlnaHQiLCJ0b3AiLCJsZWZ0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7Ozs7QUFLZSxTQUFTQSxxQkFBVCxDQUFnQ0MsSUFBaEMsRUFBc0M7QUFDakQsUUFBTUMsR0FBRyxHQUFHQyxRQUFRLENBQUNDLGVBQXJCO0FBRUEsTUFBSUMsZ0JBQWdCLEdBQUcsSUFBdkI7O0FBQ0EsU0FBT0osSUFBSSxDQUFDSyxVQUFMLElBQW1CTCxJQUFJLENBQUNLLFVBQUwsQ0FBZ0JDLHFCQUExQyxFQUFpRTtBQUM3RCxVQUFNQyxhQUFhLEdBQUdQLElBQUksQ0FBQ00scUJBQUwsRUFBdEI7QUFDQSxVQUFNRSxpQkFBaUIsR0FBR0MsTUFBTSxDQUFDQyxnQkFBUCxDQUF3QlYsSUFBeEIsQ0FBMUI7QUFDQSxVQUFNVyxpQkFBaUIsR0FBRztBQUN0QkMsTUFBQUEsS0FBSyxFQUFFWCxHQUFHLENBQUNZLFdBRFc7QUFFdEJDLE1BQUFBLE1BQU0sRUFBRWIsR0FBRyxDQUFDYztBQUZVLEtBQTFCO0FBS0FYLElBQUFBLGdCQUFnQixHQUFHQSxnQkFBZ0IsSUFDZkksaUJBQWlCLENBQUNRLE9BQWxCLEtBQThCLE1BQTlCLElBQ0FSLGlCQUFpQixDQUFDUyxVQUFsQixLQUFpQyxTQURqQyxJQUVBQyxVQUFVLENBQUNWLGlCQUFpQixDQUFDVyxPQUFuQixFQUE0QixFQUE1QixDQUFWLEdBQTRDLENBRjVDLElBR0FaLGFBQWEsQ0FBQ2EsTUFBZCxHQUF1QixDQUh2QixJQUlBYixhQUFhLENBQUNjLEtBQWQsR0FBc0IsQ0FKdEIsSUFLQWQsYUFBYSxDQUFDZSxHQUFkLEdBQW9CWCxpQkFBaUIsQ0FBQ0csTUFMdEMsSUFNQVAsYUFBYSxDQUFDZ0IsSUFBZCxHQUFxQlosaUJBQWlCLENBQUNDLEtBUDNEO0FBU0FaLElBQUFBLElBQUksR0FBR0EsSUFBSSxDQUFDSyxVQUFaO0FBQ0g7O0FBRUQsU0FBT0QsZ0JBQVA7QUFDSCIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogY2hlY2sgaWYgZWxlbWVudCBpcyB2aXNpYmxlIGFuZCB3aXRoaW4gdGhlIHZpZXdwb3J0XG4gKiBAcGFyYW0gIHtIVE1MRWxlbWVudH0gZWxlbSAgZWxlbWVudCB0byBjaGVja1xuICogQHJldHVybiB7Qm9vbGVhbn0gICAgICAgICAgIHRydWUgaWYgZWxlbWVudCBpcyB3aXRoaW4gdmlld3BvcnRcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNEaXNwbGF5ZWRJblZpZXdwb3J0IChlbGVtKSB7XG4gICAgY29uc3QgZGRlID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50XG5cbiAgICBsZXQgaXNXaXRoaW5WaWV3cG9ydCA9IHRydWVcbiAgICB3aGlsZSAoZWxlbS5wYXJlbnROb2RlICYmIGVsZW0ucGFyZW50Tm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QpIHtcbiAgICAgICAgY29uc3QgZWxlbURpbWVuc2lvbiA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgICAgY29uc3QgZWxlbUNvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtKVxuICAgICAgICBjb25zdCB2aWV3cG9ydERpbWVuc2lvbiA9IHtcbiAgICAgICAgICAgIHdpZHRoOiBkZGUuY2xpZW50V2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IGRkZS5jbGllbnRIZWlnaHRcbiAgICAgICAgfVxuXG4gICAgICAgIGlzV2l0aGluVmlld3BvcnQgPSBpc1dpdGhpblZpZXdwb3J0ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAoZWxlbUNvbXB1dGVkU3R5bGUuZGlzcGxheSAhPT0gJ25vbmUnICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbUNvbXB1dGVkU3R5bGUudmlzaWJpbGl0eSA9PT0gJ3Zpc2libGUnICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VGbG9hdChlbGVtQ29tcHV0ZWRTdHlsZS5vcGFjaXR5LCAxMCkgPiAwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbURpbWVuc2lvbi5ib3R0b20gPiAwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbURpbWVuc2lvbi5yaWdodCA+IDAgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtRGltZW5zaW9uLnRvcCA8IHZpZXdwb3J0RGltZW5zaW9uLmhlaWdodCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1EaW1lbnNpb24ubGVmdCA8IHZpZXdwb3J0RGltZW5zaW9uLndpZHRoKVxuXG4gICAgICAgIGVsZW0gPSBlbGVtLnBhcmVudE5vZGVcbiAgICB9XG5cbiAgICByZXR1cm4gaXNXaXRoaW5WaWV3cG9ydFxufVxuIl19